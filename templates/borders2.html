<style>
  .callheader {
    background-color: black;
    font-family: Roboto, sans-serif;
    color: white;
    text-align: center;
    vertical-align: middle;
    line-height: 50px;
    height: 50px;
    margin-bottom: 10px;
    border-radius: 0.375rem;
    font-size: 18px;
    text-decoration: none;
  }
</style>

<html>
<div class="callheader">Colored Borders</div>


<form>
  <div class="form-group">
    <label>Size</label>
    <input id="sizes" type="number" name="sizes" 
      
    />
  </div>
</form>
  <div class="coluna3">
      <form>
        <div class="form-group">
          <label style="text-align: left">Color </label>
          <select id="cores" name="cores">
            <option value="yellow">Yellow</option>
            <option value="Pink">Purple</option>
            <option value="blue">Blue</option>
            <option value="bluewhite">Blue White</option>
            <option value="Pink">Pink</option>
            <option value="Red">Red</option>
            <option value="Orange">Orange</option>
            <option value="Red">Red</option>
            <option value="White">White</option>
            <option value="Green">Green</option>       
            </select>
        </div>
      </form>
<br>
      <button role="button" onclick="aplica()">Banana</button>


</html>
<script>

async function aplica(size, cor) {

  let token = canvas.tokens.controlled[0]
  const effects = Sequencer.EffectManager.getEffects({
      name: "*bordinha*",
      object: token,
  });
  if (effects.length) {
      Sequencer.EffectManager.endEffects({ name: "*bordinha*", object: token });
  } 
  else {
      new Sequence()
          .effect()
          .file(`/modules/gurps-instant-defaults/packs/borders/${cor}.webm`)
          .attachTo(token)
          .scale(Number(size))
          .atLocation(token)
          .persist()
          .name("bordinha")
          .elevation(0)
          .play();
  }  
}

if (!this.getFlag("gurps-instant-defaults", "sizes")) {
  const value = $("#sizes").val(); //get the value from field
  await this.setFlag("gurps-instant-defaults", "sizes", value);
}
else {
  const size = this.getFlag("gurps-instant-defaults", "sizes");
  document.getElementsById("sizes")[0].value = size;
}



</script>